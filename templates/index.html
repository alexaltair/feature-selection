{%- extends "bootstrap/base.html" %}

{% block content %}
  <div class="container">

    <div class="page-header">
      <h1>
        <span class="glyphicon glyphicon-th" aria-hidden="true"></span>
        Unsupervised feature selection <small>One-click analysis</small>
      </h1>
    </div>

    <div class="jumbotron">
      <p>Need help understanding your data and choosing features? Upload your data and we'll do some basic analysis!</p>
      <p>The file must be a CSV of numerical data. We assume each row represents a data sample, and each column represents a feature. The first row will be treated as a header.</p>

      <form method="POST" enctype="multipart/form-data" action="{{ url_for('upload') }}">

        <label class="btn btn-default" for="my-file-selector">
          <input type="file" name="file" id="my-file-selector" style="display:none;" onchange='$("#upload-file-info").html($(this).val().replace("C:\\fakepath\\", ""));'>
          Choose file
        </label>

        <button type="submit" class="btn btn-primary">Upload</button>

        Does this file have a header?
        <input type="radio" name="header" value="True" checked> Yes
        <input type="radio" name="header" value="False"> No

      </form>
      <span class='label label-info' id="upload-file-info"></span>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading" role="tab">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" href="#collapseSummary" aria-expanded="false" aria-controls="collapseSummary">
            Summary
          </a>
        </h4>
      </div>
      <div class="panel-collapse collapse" role="tabpanel" id="collapseSummary">
        <div class="panel-body">
          {% if preview is defined %}
            {% include 'preview.html' %}
          {% endif %}
          {% if mean is defined %}
            {% include 'mean.html' %}
          {% endif %}
          {% if median is defined %}
            {% include 'median.html' %}
          {% endif %}
          {% if sorted_variance is defined %}
            {% include 'variance.html' %}
          {% endif %}
        </div>
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading" role="tab">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" href="#collapseFeatureSelect" aria-expanded="false" aria-controls="collapseFeatureSelect">
            Feature selection
          </a>
        </h4>
      </div>
      <div class="panel-collapse collapse" role="tabpanel" id="collapseFeatureSelect">
        <div class="panel-body">
          {% if sorted_variance is defined %}
            {% include 'select_variance.html' %}
          {% endif %}
        </div>
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading" role="tab">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" href="#collapseDimension" aria-expanded="false" aria-controls="collapseDimension">
            Dimensionality Reduction
          </a>
        </h4>
      </div>
      <div class="panel-collapse collapse" role="tabpanel" id="collapseDimension">
        <div class="panel-body">
          {% if pca is defined %}
            {% include 'pca.html' %}
          {% endif %}
        </div>
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading" role="tab">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" href="#collapseClustering" aria-expanded="false" aria-controls="collapseClustering">
            Clustering
          </a>
        </h4>
      </div>
      <div class="panel-collapse collapse" role="tabpanel" id="collapseClustering">
        <div class="panel-body">
          {% if dbscan is defined %}
            {% include 'clustering.html' %}
          {% endif %}
        </div>
      </div>
    </div>

  </div>
{%- endblock %}
